import PropTypes from 'prop-types';
import React, { useState } from 'react';

/**
 * Comprehensive emoji picker with categories
 */
function EmojiPicker({ onEmojiSelect, onClose }) {
  const [activeCategory, setActiveCategory] = useState('smileys');
  const [searchQuery, setSearchQuery] = useState('');

  const categories = {
    recent: {
      name: 'Frequently Used',
      icon: 'ðŸ•’',
      emojis: ['ðŸ‘', 'â¤ï¸', 'ðŸ˜‚', 'ðŸ˜Š', 'ðŸ˜', 'ðŸŽ‰', 'ðŸ”¥', 'âœ¨', 'ðŸ’¯'],
    },
    smileys: {
      name: 'Smileys & People',
      icon: 'ðŸ˜Š',
      emojis: [
        'ðŸ˜€',
        'ðŸ˜ƒ',
        'ðŸ˜„',
        'ðŸ˜',
        'ðŸ˜†',
        'ðŸ˜…',
        'ðŸ¤£',
        'ðŸ˜‚',
        'ðŸ™‚',
        'ðŸ™ƒ',
        'ðŸ˜‰',
        'ðŸ˜Š',
        'ðŸ˜‡',
        'ðŸ¥°',
        'ðŸ˜',
        'ðŸ¤©',
        'ðŸ˜˜',
        'ðŸ˜—',
        'ðŸ˜š',
        'ðŸ˜™',
        'ðŸ˜‹',
        'ðŸ˜›',
        'ðŸ˜œ',
        'ðŸ¤ª',
        'ðŸ˜',
        'ðŸ¤‘',
        'ðŸ¤—',
        'ðŸ¤­',
        'ðŸ¤«',
        'ðŸ¤”',
        'ðŸ¤',
        'ðŸ¤¨',
        'ðŸ˜',
        'ðŸ˜‘',
        'ðŸ˜¶',
        'ðŸ˜',
        'ðŸ˜’',
        'ðŸ™„',
        'ðŸ˜¬',
        'ðŸ¤¥',
        'ðŸ˜Œ',
        'ðŸ˜”',
        'ðŸ˜ª',
        'ðŸ¤¤',
        'ðŸ˜´',
        'ðŸ˜·',
        'ðŸ¤’',
        'ðŸ¤•',
        'ðŸ¤¢',
        'ðŸ¤®',
        'ðŸ¤§',
        'ðŸ¥µ',
        'ðŸ¥¶',
        'ðŸ˜¶â€ðŸŒ«ï¸',
        'ðŸ¥´',
        'ðŸ˜µ',
        'ðŸ¤¯',
        'ðŸ¤ ',
        'ðŸ¥³',
        'ðŸ˜Ž',
        'ðŸ¤“',
        'ðŸ§',
        'ðŸ˜•',
        'ðŸ˜Ÿ',
        'ðŸ™',
        'â˜¹ï¸',
        'ðŸ˜®',
        'ðŸ˜¯',
        'ðŸ˜²',
        'ðŸ˜³',
        'ðŸ¥º',
        'ðŸ˜¦',
        'ðŸ˜§',
        'ðŸ˜¨',
        'ðŸ˜°',
        'ðŸ˜¥',
        'ðŸ˜¢',
        'ðŸ˜­',
        'ðŸ˜±',
        'ðŸ˜–',
        'ðŸ˜£',
        'ðŸ˜ž',
        'ðŸ˜“',
        'ðŸ˜©',
        'ðŸ˜«',
        'ðŸ¥±',
        'ðŸ˜¤',
        'ðŸ˜¡',
        'ðŸ˜ ',
        'ðŸ¤¬',
      ],
    },
    animals: {
      name: 'Animals & Nature',
      icon: 'ðŸ¶',
      emojis: [
        'ðŸ¶',
        'ðŸ±',
        'ðŸ­',
        'ðŸ¹',
        'ðŸ°',
        'ðŸ¦Š',
        'ðŸ»',
        'ðŸ¼',
        'ðŸ¨',
        'ðŸ¯',
        'ðŸ¦',
        'ðŸ®',
        'ðŸ·',
        'ðŸ¸',
        'ðŸµ',
        'ðŸ”',
        'ðŸ§',
        'ðŸ¦',
        'ðŸ¤',
        'ðŸ¦†',
        'ðŸ¦…',
        'ðŸ¦‰',
        'ðŸ¦‡',
        'ðŸº',
        'ðŸ—',
        'ðŸ´',
        'ðŸ¦„',
        'ðŸ',
        'ðŸ›',
        'ðŸ¦‹',
        'ðŸŒ',
        'ðŸž',
        'ðŸœ',
        'ðŸ¦Ÿ',
        'ðŸ¦—',
        'ðŸ•·',
        'ðŸ¦‚',
        'ðŸ¢',
        'ðŸ',
        'ðŸ¦Ž',
        'ðŸ¦–',
        'ðŸ¦•',
        'ðŸ™',
        'ðŸ¦‘',
        'ðŸ¦',
        'ðŸ¦ž',
        'ðŸ¦€',
        'ðŸ¡',
        'ðŸ ',
        'ðŸŸ',
        'ðŸ¬',
        'ðŸ³',
        'ðŸ‹',
        'ðŸ¦ˆ',
        'ðŸŠ',
        'ðŸ…',
        'ðŸ†',
        'ðŸ¦“',
        'ðŸ¦',
        'ðŸ¦§',
      ],
    },
    food: {
      name: 'Food & Drink',
      icon: 'ðŸ•',
      emojis: [
        'ðŸ',
        'ðŸŽ',
        'ðŸ',
        'ðŸŠ',
        'ðŸ‹',
        'ðŸŒ',
        'ðŸ‰',
        'ðŸ‡',
        'ðŸ“',
        'ðŸˆ',
        'ðŸ’',
        'ðŸ‘',
        'ðŸ¥­',
        'ðŸ',
        'ðŸ¥¥',
        'ðŸ¥',
        'ðŸ…',
        'ðŸ†',
        'ðŸ¥‘',
        'ðŸ¥¦',
        'ðŸ¥¬',
        'ðŸ¥’',
        'ðŸŒ¶',
        'ðŸŒ½',
        'ðŸ¥•',
        'ðŸ§„',
        'ðŸ§…',
        'ðŸ¥”',
        'ðŸ ',
        'ðŸ¥',
        'ðŸ¥¯',
        'ðŸž',
        'ðŸ¥–',
        'ðŸ¥¨',
        'ðŸ§€',
        'ðŸ¥š',
        'ðŸ³',
        'ðŸ§ˆ',
        'ðŸ¥ž',
        'ðŸ§‡',
        'ðŸ¥“',
        'ðŸ¥©',
        'ðŸ—',
        'ðŸ–',
        'ðŸ¦´',
        'ðŸŒ­',
        'ðŸ”',
        'ðŸŸ',
        'ðŸ•',
        'ðŸ¥ª',
        'ðŸ¥™',
        'ðŸ§†',
        'ðŸŒ®',
        'ðŸŒ¯',
        'ðŸ¥—',
        'ðŸ¥˜',
        'ðŸ¥«',
        'ðŸ',
        'ðŸœ',
        'ðŸ²',
        'ðŸ›',
        'ðŸ£',
        'ðŸ±',
        'ðŸ¥Ÿ',
        'ðŸ¦ª',
        'ðŸ¤',
        'ðŸ™',
        'ðŸš',
        'ðŸ˜',
        'ðŸ¥',
        'ðŸ¥ ',
        'ðŸ¥®',
        'ðŸ¢',
        'ðŸ¡',
        'ðŸ§',
        'ðŸ¨',
        'ðŸ¦',
        'ðŸ¥§',
        'ðŸ§',
        'ðŸ°',
        'ðŸŽ‚',
        'ðŸ®',
        'ðŸ­',
        'ðŸ¬',
        'ðŸ«',
        'ðŸ¿',
        'ðŸ©',
        'ðŸª',
        'ðŸŒ°',
        'ðŸ¥œ',
        'ðŸ¯',
        'ðŸ¥›',
        'ðŸ¼',
        'â˜•',
        'ðŸµ',
        'ðŸ§ƒ',
        'ðŸ¥¤',
        'ðŸ¶',
        'ðŸº',
        'ðŸ»',
      ],
    },
    activities: {
      name: 'Activities',
      icon: 'âš½',
      emojis: [
        'âš½',
        'ðŸ€',
        'ðŸˆ',
        'âš¾',
        'ðŸ¥Ž',
        'ðŸŽ¾',
        'ðŸ',
        'ðŸ‰',
        'ðŸ¥',
        'ðŸŽ±',
        'ðŸª€',
        'ðŸ“',
        'ðŸ¸',
        'ðŸ’',
        'ðŸ‘',
        'ðŸ¥',
        'ðŸ',
        'ðŸ¥…',
        'â›³',
        'ðŸª',
        'ðŸ¹',
        'ðŸŽ£',
        'ðŸ¤¿',
        'ðŸ¥Š',
        'ðŸ¥‹',
        'ðŸŽ½',
        'ðŸ›¹',
        'ðŸ›¼',
        'ðŸ›·',
        'â›¸',
        'ðŸ¥Œ',
        'ðŸŽ¿',
        'â›·',
        'ðŸ‚',
        'ðŸª‚',
        'ðŸ‹ï¸',
        'ðŸ¤¼',
        'ðŸ¤¸',
        'ðŸ¤º',
        'â›¹ï¸',
        'ðŸ¤¾',
        'ðŸŒï¸',
        'ðŸ‡',
        'ðŸ§˜',
        'ðŸŠ',
        'ðŸ¤½',
        'ðŸš£',
        'ðŸ§—',
        'ðŸš´',
        'ðŸšµ',
        'ðŸŽª',
        'ðŸŽ­',
        'ðŸŽ¨',
        'ðŸŽ¬',
        'ðŸŽ¤',
        'ðŸŽ§',
        'ðŸŽ¼',
        'ðŸŽ¹',
        'ðŸ¥',
        'ðŸŽ·',
        'ðŸŽº',
        'ðŸŽ¸',
        'ðŸª•',
        'ðŸŽ»',
        'ðŸŽ²',
        'â™Ÿ',
        'ðŸŽ¯',
        'ðŸŽ³',
        'ðŸŽ®',
        'ðŸŽ°',
      ],
    },
    travel: {
      name: 'Travel & Places',
      icon: 'âœˆï¸',
      emojis: [
        'ðŸš—',
        'ðŸš•',
        'ðŸš™',
        'ðŸšŒ',
        'ðŸšŽ',
        'ðŸŽ',
        'ðŸš“',
        'ðŸš‘',
        'ðŸš’',
        'ðŸš',
        'ðŸšš',
        'ðŸš›',
        'ðŸšœ',
        'ðŸ¦¯',
        'ðŸ¦½',
        'ðŸ¦¼',
        'ðŸ›´',
        'ðŸš²',
        'ðŸ›µ',
        'ðŸ',
        'ðŸ›º',
        'ðŸš¨',
        'ðŸš”',
        'ðŸš',
        'ðŸš˜',
        'ðŸš–',
        'ðŸš¡',
        'ðŸš ',
        'ðŸšŸ',
        'ðŸšƒ',
        'ðŸš‹',
        'ðŸšž',
        'ðŸš',
        'ðŸš„',
        'ðŸš…',
        'ðŸšˆ',
        'ðŸš‚',
        'ðŸš†',
        'ðŸš‡',
        'ðŸšŠ',
        'ðŸš‰',
        'âœˆï¸',
        'ðŸ›«',
        'ðŸ›¬',
        'ðŸ›©',
        'ðŸ’º',
        'ðŸ›°',
        'ðŸš€',
        'ðŸ›¸',
        'ðŸš',
        'ðŸ›¶',
        'â›µ',
        'ðŸš¤',
        'ðŸ›¥',
        'ðŸ›³',
        'â›´',
        'ðŸš¢',
        'âš“',
        'â›½',
        'ðŸš§',
        'ðŸš¦',
        'ðŸš¥',
        'ðŸ—º',
        'ðŸ—¿',
        'ðŸ—½',
        'ðŸ—¼',
        'ðŸ°',
        'ðŸ¯',
        'ðŸŸ',
        'ðŸŽ¡',
        'ðŸŽ¢',
        'ðŸŽ ',
        'â›²',
        'â›±',
        'ðŸ–',
        'ðŸ',
        'ðŸœ',
        'ðŸŒ‹',
        'â›°',
        'ðŸ”',
      ],
    },
    objects: {
      name: 'Objects',
      icon: 'ðŸ’¡',
      emojis: [
        'âŒš',
        'ðŸ“±',
        'ðŸ“²',
        'ðŸ’»',
        'âŒ¨ï¸',
        'ðŸ–¥',
        'ðŸ–¨',
        'ðŸ–±',
        'ðŸ–²',
        'ðŸ•¹',
        'ðŸ—œ',
        'ðŸ’¾',
        'ðŸ’¿',
        'ðŸ“€',
        'ðŸ“¼',
        'ðŸ“·',
        'ðŸ“¸',
        'ðŸ“¹',
        'ðŸŽ¥',
        'ðŸ“½',
        'ðŸŽž',
        'ðŸ“ž',
        'â˜Žï¸',
        'ðŸ“Ÿ',
        'ðŸ“ ',
        'ðŸ“º',
        'ðŸ“»',
        'ðŸŽ™',
        'ðŸŽš',
        'ðŸŽ›',
        'ðŸ§­',
        'â±',
        'â²',
        'â°',
        'ðŸ•°',
        'âŒ›',
        'â³',
        'ðŸ“¡',
        'ðŸ”‹',
        'ðŸ”Œ',
        'ðŸ’¡',
        'ðŸ”¦',
        'ðŸ•¯',
        'ðŸª”',
        'ðŸ§¯',
        'ðŸ›¢',
        'ðŸ’¸',
        'ðŸ’µ',
        'ðŸ’´',
        'ðŸ’¶',
        'ðŸ’·',
        'ðŸ’°',
        'ðŸ’³',
        'ðŸ’Ž',
        'âš–ï¸',
        'ðŸ§°',
        'ðŸ”§',
        'ðŸ”¨',
        'âš’',
        'ðŸ› ',
        'â›',
        'ðŸ”©',
        'âš™ï¸',
        'ðŸ§±',
        'â›“',
        'ðŸ§²',
        'ðŸ”«',
        'ðŸ’£',
        'ðŸ§¨',
        'ðŸª“',
        'ðŸ”ª',
        'ðŸ—¡',
        'âš”ï¸',
        'ðŸ›¡',
        'ðŸš¬',
        'âš°ï¸',
        'âš±ï¸',
        'ðŸº',
        'ðŸ”®',
        'ðŸ“¿',
        'ðŸ§¿',
        'ðŸ’ˆ',
        'âš—ï¸',
        'ðŸ”­',
        'ðŸ”¬',
        'ðŸ•³',
        'ðŸ©¹',
        'ðŸ©º',
        'ðŸ’Š',
        'ðŸ’‰',
        'ðŸ©¸',
        'ðŸ§¬',
        'ðŸ¦ ',
        'ðŸ§«',
        'ðŸ§ª',
        'ðŸŒ¡',
        'ðŸ§¹',
        'ðŸ§º',
        'ðŸ§»',
        'ðŸš½',
      ],
    },
    symbols: {
      name: 'Symbols',
      icon: 'â¤ï¸',
      emojis: [
        'â¤ï¸',
        'ðŸ§¡',
        'ðŸ’›',
        'ðŸ’š',
        'ðŸ’™',
        'ðŸ’œ',
        'ðŸ–¤',
        'ðŸ¤',
        'ðŸ¤Ž',
        'ðŸ’”',
        'â£ï¸',
        'ðŸ’•',
        'ðŸ’ž',
        'ðŸ’“',
        'ðŸ’—',
        'ðŸ’–',
        'ðŸ’˜',
        'ðŸ’',
        'ðŸ’Ÿ',
        'â˜®ï¸',
        'âœï¸',
        'â˜ªï¸',
        'ðŸ•‰',
        'â˜¸ï¸',
        'âœ¡ï¸',
        'ðŸ”¯',
        'ðŸ•Ž',
        'â˜¯ï¸',
        'â˜¦ï¸',
        'ðŸ›',
        'â›Ž',
        'â™ˆ',
        'â™‰',
        'â™Š',
        'â™‹',
        'â™Œ',
        'â™',
        'â™Ž',
        'â™',
        'â™',
        'â™‘',
        'â™’',
        'â™“',
        'ðŸ†”',
        'âš›ï¸',
        'ðŸ‰‘',
        'â˜¢ï¸',
        'â˜£ï¸',
        'ðŸ“´',
        'ðŸ“³',
        'ðŸˆ¶',
        'ðŸˆš',
        'ðŸˆ¸',
        'ðŸˆº',
        'ðŸˆ·ï¸',
        'âœ´ï¸',
        'ðŸ†š',
        'ðŸ’®',
        'ðŸ‰',
        'ãŠ™ï¸',
        'ãŠ—ï¸',
        'ðŸˆ´',
        'ðŸˆµ',
        'ðŸˆ¹',
        'ðŸˆ²',
        'ðŸ…°ï¸',
        'ðŸ…±ï¸',
        'ðŸ†Ž',
        'ðŸ†‘',
        'ðŸ…¾ï¸',
        'ðŸ†˜',
        'âŒ',
        'â­•',
        'ðŸ›‘',
        'â›”',
        'ðŸ“›',
        'ðŸš«',
        'ðŸ’¯',
        'ðŸ’¢',
        'â™¨ï¸',
        'ðŸš·',
        'ðŸš¯',
        'ðŸš³',
        'ðŸš±',
        'ðŸ”ž',
        'ðŸ“µ',
        'ðŸš­',
        'â—',
        'â•',
        'â“',
        'â”',
        'â€¼ï¸',
        'â‰ï¸',
        'ðŸ”…',
        'ðŸ”†',
        'ã€½ï¸',
        'âš ï¸',
        'ðŸš¸',
        'ðŸ”±',
        'âšœï¸',
      ],
    },
    flags: {
      name: 'Flags',
      icon: 'ðŸ',
      emojis: [
        'ðŸ',
        'ðŸš©',
        'ðŸŽŒ',
        'ðŸ´',
        'ðŸ³ï¸',
        'ðŸ³ï¸â€ðŸŒˆ',
        'ðŸ´â€â˜ ï¸',
        'ðŸ‡ºðŸ‡³',
        'ðŸ‡¦ðŸ‡«',
        'ðŸ‡¦ðŸ‡½',
        'ðŸ‡¦ðŸ‡±',
        'ðŸ‡©ðŸ‡¿',
        'ðŸ‡¦ðŸ‡¸',
        'ðŸ‡¦ðŸ‡©',
        'ðŸ‡¦ðŸ‡´',
        'ðŸ‡¦ðŸ‡®',
        'ðŸ‡¦ðŸ‡¶',
        'ðŸ‡¦ðŸ‡¬',
        'ðŸ‡¦ðŸ‡·',
        'ðŸ‡¦ðŸ‡²',
        'ðŸ‡¦ðŸ‡¼',
        'ðŸ‡¦ðŸ‡º',
        'ðŸ‡¦ðŸ‡¹',
        'ðŸ‡¦ðŸ‡¿',
        'ðŸ‡§ðŸ‡¸',
        'ðŸ‡§ðŸ‡­',
        'ðŸ‡§ðŸ‡©',
        'ðŸ‡§ðŸ‡§',
        'ðŸ‡§ðŸ‡¾',
        'ðŸ‡§ðŸ‡ª',
        'ðŸ‡§ðŸ‡¿',
        'ðŸ‡§ðŸ‡¯',
        'ðŸ‡§ðŸ‡²',
        'ðŸ‡§ðŸ‡¹',
        'ðŸ‡§ðŸ‡´',
        'ðŸ‡§ðŸ‡¦',
        'ðŸ‡§ðŸ‡¼',
        'ðŸ‡§ðŸ‡·',
        'ðŸ‡®ðŸ‡´',
        'ðŸ‡»ðŸ‡¬',
        'ðŸ‡§ðŸ‡³',
        'ðŸ‡§ðŸ‡¬',
        'ðŸ‡§ðŸ‡«',
        'ðŸ‡§ðŸ‡®',
        'ðŸ‡°ðŸ‡­',
        'ðŸ‡¨ðŸ‡²',
        'ðŸ‡¨ðŸ‡¦',
        'ðŸ‡®ðŸ‡¨',
        'ðŸ‡¨ðŸ‡»',
        'ðŸ‡§ðŸ‡¶',
        'ðŸ‡°ðŸ‡¾',
        'ðŸ‡¨ðŸ‡«',
        'ðŸ‡¹ðŸ‡©',
        'ðŸ‡¨ðŸ‡±',
        'ðŸ‡¨ðŸ‡³',
        'ðŸ‡¨ðŸ‡½',
        'ðŸ‡¨ðŸ‡¨',
        'ðŸ‡¨ðŸ‡´',
        'ðŸ‡°ðŸ‡²',
        'ðŸ‡¨ðŸ‡¬',
        'ðŸ‡¨ðŸ‡©',
        'ðŸ‡¨ðŸ‡°',
        'ðŸ‡¨ðŸ‡·',
        'ðŸ‡¨ðŸ‡®',
        'ðŸ‡­ðŸ‡·',
        'ðŸ‡¨ðŸ‡º',
        'ðŸ‡¨ðŸ‡¼',
        'ðŸ‡¨ðŸ‡¾',
        'ðŸ‡¨ðŸ‡¿',
        'ðŸ‡©ðŸ‡°',
      ],
    },
  };

  const categoryKeys = Object.keys(categories);

  const filteredEmojis = searchQuery
    ? Object.entries(categories).reduce((acc, [key, category]) => {
        const filtered = category.emojis.filter(emoji => emoji.toLowerCase().includes(searchQuery.toLowerCase()));
        if (filtered.length > 0) {
          acc[key] = { ...category, emojis: filtered };
        }

        return acc;
      }, {})
    : { [activeCategory]: categories[activeCategory] };

  const handleEmojiClick = emoji => {
    onEmojiSelect(emoji);
    if (onClose) {
      onClose();
    }
  };

  return (
    <div className='bg-white border border-gray-200 rounded-lg shadow-xl w-[350px] h-[400px] flex flex-col'>
      {/* Search Bar */}
      <div className='p-3 border-b border-gray-200'>
        <input
          type='text'
          placeholder='Search'
          value={searchQuery}
          onChange={e => setSearchQuery(e.target.value)}
          className='w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent'
        />
      </div>

      {/* Category Tabs */}
      {!searchQuery && (
        <div className='flex items-center justify-between px-2 py-2 border-b border-gray-200 overflow-x-auto'>
          {categoryKeys.map(key => (
            <button
              key={key}
              onClick={() => setActiveCategory(key)}
              className={`p-2 text-xl hover:bg-gray-100 rounded transition-colors ${
                activeCategory === key ? 'bg-gray-100' : ''
              }`}
              title={categories[key].name}
            >
              {categories[key].icon}
            </button>
          ))}
        </div>
      )}

      {/* Emoji Grid */}
      <div className='flex-1 overflow-y-auto p-3'>
        {searchQuery ? (
          // Show all categories when searching
          Object.entries(filteredEmojis).map(([key, category]) => (
            <div
              key={key}
              className='mb-4'
            >
              <h3 className='text-xs font-semibold text-gray-600 mb-2'>{category.name}</h3>
              <div className='grid grid-cols-9 gap-1'>
                {category.emojis.map((emoji, idx) => (
                  <button
                    key={`${emoji}-${idx}`}
                    onClick={() => handleEmojiClick(emoji)}
                    className='w-8 h-8 flex items-center justify-center text-2xl hover:bg-gray-100 rounded transition-colors'
                    title={emoji}
                  >
                    {emoji}
                  </button>
                ))}
              </div>
            </div>
          ))
        ) : (
          // Show active category
          <div>
            <h3 className='text-xs font-semibold text-gray-600 mb-2'>{categories[activeCategory].name}</h3>
            <div className='grid grid-cols-9 gap-1'>
              {categories[activeCategory].emojis.map((emoji, idx) => (
                <button
                  key={`${emoji}-${idx}`}
                  onClick={() => handleEmojiClick(emoji)}
                  className='w-8 h-8 flex items-center justify-center text-2xl hover:bg-gray-100 rounded transition-colors'
                  title={emoji}
                >
                  {emoji}
                </button>
              ))}
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

EmojiPicker.propTypes = {
  onEmojiSelect: PropTypes.func.isRequired,
  onClose: PropTypes.func,
};

export default EmojiPicker;
